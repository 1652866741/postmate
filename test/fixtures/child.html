<!doctype html>
<html>
  <head>
    <style>
      body {
        height: 1234px;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="../build/postmate.min.js"></script>
    <script type="text/javascript">
      let parentAPI = null;
      let height = function () { return document.height || document.body.offsetHeight; };
      let foo = "foo";
      let doValidate = function () {
        setTimeout(function () {
          parentAPI.emit('validated', parentAPI.model.uid);
        }, 1000);
      };

      new Postmate.Model({ height, foo, doValidate })
      .then(parent => { parentAPI = parent; });
    </script>
  </body>
</html>
